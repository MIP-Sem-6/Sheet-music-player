{% include 'main/header.html' %}
{% load static %}
{% load define_action %}


    <!-- ***** Header Area End ***** -->

<!-- {% if tab == 1 %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
    // Handler for .ready() called.
    $('html, body').animate({
        scrollTop: $('#about').offset().top
    }, 'slow');
});
</script>
{% endif %} -->


    

    <div class="row">
      <div class="col-12 pageheading">
          <div class="page-title">Favourites</div>
          <div class="subh">All your favourite songs at one place!</div>
      </div>
  </div>

  
      <!-- Topic Cards -->
      <div id="cards_landscape_wrap-2">
        <div class="container">
            <div class="row">
                {% for ob in my_songs %}
                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
                        <div class="card-flyer">
                            <div class="text-box">
                                <div class="image-box" style="position: relative;">
                                        <img src="{{ ob.cover_image.url }}" alt="" />
                                        {% if ob.user == request.user %}
                
                                        <div class="centered-1">
                                            <a href="{% url 'update_song' ob.id %}"><i class="fa fa-edit song-update"></i></a>
                                        </div>
                                        <div class="centered-2">
                                            <a href="#" role="button"  data-toggle="modal" data-target="#exampleModal">
                                                <i class="fa fa-ban song-delete" onclick="setDeleteId({{ob.id}})"></i>
                                            </a>
                                        </div>
                                        {% endif %}
                                   
                                </div>
                                <div class="text-container">
                                    <h5 style="font-weight: 900;">{{ ob.title }}</h5>
                                    <p class="album" style="color: #d15f13;">{{ ob.album }}</p>
                                    <p class="sub"> <i class="fa fa-music"></i> {{ ob.artist }}</p>
                                    <p class="sub"> <i class="fa fa-user"></i> {{ ob.user }}</p>
                                   

                                    <form method="POST">
                                        {% csrf_token %}
                            
                                    {% if ob|get_liked:request.user == True %}
   
                                    <button id="swapHeart" class="btn btn-default" name="unsubscribe">
                                        <span class="fa fa-heart"> <span class="tooltip" style="margin-top: 20px;">Remove from favourites</span></span>
                                    </button>

                                    {% else %}

                                    <button id="swapHeart" class="btn btn-default" name="subscribe">
                                        <span class="fa fa-heart-o"> <span class="tooltip" style="margin-top: 20px;">Add to favourites</span></span>
                                    </button>

                                      {% endif %}
                                      <br>

                                    <a href="#"><span class="badge badge-warning"> {{ ob.tags }} </span></a> <br> 
                                    <audio controls id="soundPlayer" onplay="sendCount({{ob.id}});">
                                        <source src="{{ ob.file_name.url }}" type="audio/mpeg">
                                    </audio>
                                   
                                    <input class="inv" name="songid" type="number" value="{{ob.id}}"> 
                                </div>
                            </div>
                        </div>
                </div>
                
            </form>

                
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Delete Song</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form method="POST">
                {% csrf_token %}
            <div class="modal-body">
              Are you sure you want to delete this song?
              
                
                <input  class="inv" id="songid_delete" name="songid_delete" type="number" value="0"> 
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button  class="btn btn-primary" name="delete">Yes</button>

            </div>
        </form>
          </div>
        </div>
      </div>



    <!-- ***** Features Big Item Start ***** -->
    <section class="section" id="about">
      <div class="container">
  
 


    <!-- ***** Testimonials Starts ***** -->
    </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>  </div>
            </div>
        </div>
    </section>
    <!-- ***** Testimonials Ends ***** -->


    <!-- ***** Footer Start ***** -->
    <footer id="contact-us">
        <div class="container">
           
            <div class="row">
                <div class="col-lg-12">
                    <div class="sub-footer">
                        <p>Clef Music Player | Created by Hansi, Himali, Parth<</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    {% block javascript %}

<script>

  let c = 1;
  
  function sendCount(id) {
  $.ajax({
      url: "{% url 'index' %}",
      type: "POST",
      data: {
        'count': c,
        'id':id,
        csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      dataType: 'json'
    });

  }

  function favButton(id,flag)
  {
    let sid = "#heart"+String(id);

    if (flag=="True")
    {
      console.log('unliked');

      $.ajax({
      url: "{% url 'index' %}",
      type: "POST",
      data: {
        'remove_fav':id,
        csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      dataType: 'json'
    });
    $(sid).removeClass("fa-heart");
    $(sid).addClass("fa-heart-o");
    }
    else{
      $.ajax({
      url: "{% url 'index' %}",
      type: "POST",
      data: {
        'add_fav':id,
        csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      dataType: 'json'
    });

    }
    $(sid).removeClass("fa-heart-o");
    $(sid).addClass("fa-heart");
    console.log('liked');
  
    console.log("Step 1");
 $(document).ready(function(){
              
             $('#upload-file').change(function() {
                var filename = $(this).val();
                console.log("Step 1");
                $('#file-upload-name').html(filename);
                if(filename!=""){
                    setTimeout(function(){
                        $('.upload-wrapper').addClass("uploaded");
                    }, 600);
                    setTimeout(function(){
                        $('.upload-wrapper').removeClass("uploaded");
                        $('.upload-wrapper').addClass("success");
                    }, 1600);
                }
            });
        });
  }  
</script>
{% endblock %}

    <!-- jQuery -->
    <script src="{% static 'main/assets/js/jquery-2.1.0.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{% static 'main/assets/js/popper.js' %}"></script>
    <script src="{% static 'main/assets/js/bootstrap.min.js' %}"></script>

    <!-- Plugins -->
    <script src="{% static 'main/assets/js/owl-carousel.js' %}"></script>
    <script src="{% static 'main/assets/js/scrollreveal.min.js' %}"></script>
    <script src="{% static 'main/assets/js/waypoints.min.js' %}"></script>
    <script src="{% static 'main/assets/js/jquery.counterup.min.js' %}"></script>
    <script src="{% static 'main/assets/js/imgfix.min.js' %}"></script>

    <!-- Global Init -->
    <script src="{% static 'main/assets/js/custom.js' %}"></script>

</body>
</html>